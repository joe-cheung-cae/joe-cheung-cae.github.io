@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --bg-primary: #ffffff;
    --bg-secondary: #f5f5f5;
    --text-primary: #37352f;
    --text-secondary: #6b6b6b;
    --border-color: #e3e2e0;
    --accent-color: #2eaadc;
  }

  .dark {
    --bg-primary: #191919;
    --bg-secondary: #2f2f2f;
    --text-primary: #e3e2e0;
    --text-secondary: #9a9a9a;
    --border-color: #444444;
    --accent-color: #2eaadc;
  }

  * {
    @apply border-notion-border dark:border-notion-border-dark;
  }

  html {
    @apply scroll-smooth;
  }

  body {
    @apply bg-notion-bg dark:bg-notion-bg-dark text-notion-text dark:text-notion-text-dark antialiased;
    font-feature-settings: "rlig" 1, "calt" 1;
  }
}

@layer components {
  .prose-custom {
    @apply prose prose-slate max-w-none dark:prose-invert;
    @apply prose-headings:font-semibold prose-headings:tracking-tight;
    @apply prose-h1:text-3xl prose-h1:mt-8 prose-h1:mb-4;
    @apply prose-h2:text-2xl prose-h2:mt-8 prose-h2:mb-4;
    @apply prose-h3:text-xl prose-h3:mt-6 prose-h3:mb-3;
    @apply prose-p:my-4 prose-p:leading-relaxed;
    @apply prose-a:text-notion-blue prose-a:no-underline hover:prose-a:underline;
    @apply prose-code:text-notion-text dark:prose-code:text-notion-text-dark;
    @apply prose-code:bg-notion-gray dark:prose-code:bg-notion-gray-dark;
    @apply prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded prose-code:text-sm;
    @apply prose-pre:bg-notion-gray dark:prose-pre:bg-notion-gray-dark;
    @apply prose-pre:rounded-xl prose-pre:p-4 prose-pre:overflow-x-auto;
    @apply prose-pre:shadow-sm dark:prose-pre:shadow-black/20;
    @apply prose-pre:border prose-pre:border-notion-border dark:prose-pre:border-notion-border-dark;
    @apply prose-img:rounded-lg prose-img:my-6;
    @apply prose-blockquote:border-l-4 prose-blockquote:border-notion-blue;
    @apply prose-blockquote:pl-4 prose-blockquote:italic;
    @apply prose-ul:my-4 prose-ol:my-4;
    @apply prose-li:my-1;
  }

  .callout {
    @apply p-4 rounded-lg my-6 flex gap-3;
  }

  .callout-note {
    @apply bg-notion-blue-light dark:bg-blue-900/20 border-l-4 border-notion-blue;
  }

  .callout-tip {
    @apply bg-notion-green dark:bg-green-900/20 border-l-4 border-green-500;
  }

  .callout-warning {
    @apply bg-notion-orange dark:bg-orange-900/20 border-l-4 border-orange-500;
  }

  .callout-danger {
    @apply bg-notion-red dark:bg-red-900/20 border-l-4 border-red-500;
  }

  .search-highlight {
    @apply bg-yellow-200 dark:bg-yellow-700;
  }

  .prose-custom pre.astro-code {
    padding: 1rem 1.125rem;
    line-height: 1.65;
    tab-size: 2;
  }

  .prose-custom pre.astro-code code {
    background: transparent !important;
    padding: 0 !important;
    border-radius: 0 !important;
  }

  .prose-custom pre.astro-code::-webkit-scrollbar {
    height: 10px;
  }

  .prose-custom pre.astro-code::-webkit-scrollbar-thumb {
    background: rgba(107, 114, 128, 0.45);
    border-radius: 9999px;
  }

  .dark .prose-custom pre.astro-code::-webkit-scrollbar-thumb {
    background: rgba(156, 163, 175, 0.4);
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  @apply bg-transparent;
}

::-webkit-scrollbar-thumb {
  @apply bg-gray-300 dark:bg-gray-600 rounded-full;
}

::-webkit-scrollbar-thumb:hover {
  @apply bg-gray-400 dark:bg-gray-500;
}

/* Selection color */
::selection {
  @apply bg-notion-blue/30;
}

/* Shiki dual theme support - Light mode (default) */
.astro-code {
  border-radius: 0.75rem !important;
  border: 1px solid var(--border-color) !important;
  box-shadow: 0 8px 24px -16px rgba(15, 23, 42, 0.35);
  overflow-x: auto !important;
  padding: 1rem 1.125rem !important;
  line-height: 1.65;
  tab-size: 2;
}

.astro-code,
.astro-code span {
  color: var(--shiki-light) !important;
  background-color: var(--shiki-light-bg) !important;
  font-style: var(--shiki-light-font-style) !important;
  font-weight: var(--shiki-light-font-weight) !important;
  text-decoration: var(--shiki-light-text-decoration) !important;
}

/* Shiki dual theme support - Dark mode */
.dark .astro-code,
.dark .astro-code span {
  color: var(--shiki-dark) !important;
  background-color: var(--shiki-dark-bg) !important;
  font-style: var(--shiki-dark-font-style) !important;
  font-weight: var(--shiki-dark-font-weight) !important;
  text-decoration: var(--shiki-dark-text-decoration) !important;
}

.dark .astro-code {
  border-color: var(--border-color) !important;
  box-shadow: 0 10px 28px -18px rgba(0, 0, 0, 0.75);
}
